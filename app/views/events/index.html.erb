<div class="events">
  
  <div id="query">
    <h2>Find an Event in October</h2>
    
    
  </div>

  <div id="selector">
    <ul>
      <li>Display results as a:</li>
      <li class="map">Map</li>
      <li class="calendar">Calendar</li>
      <li class="list view">List</li>
    </ul>
  </div>


  <div class="calendar_view">
    <% calendar_for(@events, :year => 2009, :month => 10, :first_day_of_week => 1) do |t| %>
      <%= t.head('Mon', 'Tue', 'Wedn', 'Thu', 'Fri', 'Sat', 'Sun') %>
      <% t.day(:day_method => :start) do |day, events| %>
        <p class="day"><%= day.day %></p>
        <% events.each do |event| %>
            <p class="event"><%= link_to h(event.title), path_for_event(event) %></p>
        <% end %>
        <% if total = @event_counts[Date.parse("#{day} #{@month} #{@year}").to_s] %>
          <p class="more_link"><%= link_to "#{total} events today" if total > 3 %></p>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>